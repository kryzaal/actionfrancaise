<% include head %>

<div id="titre"><h1>Visuels, affiches et vid√©os</h1></div>

<div id="visuels" class="viewer_elements">
	<% visuels.forEach(function(filename) { %>
		 <img src="/visuel/<%= filename %>"/>
	<% }); %>
</div>

<div id="videos">
	<% videos.forEach(function(code) {%>
		<div class="video_<%= code %>" onClick="loadVideo(this, '<%= code %>')"></div>
		<script>$('document').ready(function() {loadTitle('<%= code %>');});</script>
	<% }); %>
</div>

<% include viewer %>

<script>
	function loadVideo(parentDiv, code) {
		parentDiv.innerHTML = '<iframe src="http://www.youtube.com/embed/' + code + '?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>';
	}

	function loadTitle(code) {
	    $.getJSON("http://gdata.youtube.com/feeds/api/videos/" + code + "?v=2&alt=jsonc", function(response) {
	    	$(".video_" + code).html('<img src="http://img.youtube.com/vi/' + code + '/0.jpg"/>' + '<h1>' + response.data.title + '</h1>');
	    });
	}

	$(function() {
		$('#random').remove();
	});
</script>

<% include foot %>