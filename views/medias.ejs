<% include head %>

<div id="fullscreen"></div>

<div id="titre"><h1>Visuels, affiches et vid√©os</h1></div>

<div id="visuels">
	<% visuels.forEach(function(filename) { %>
		 <img src="/visuel/<%= filename %>" onClick="expand(this);"/>
	<% }); %>
</div>

<div id="videos">
	<% videos.forEach(function(code) {%>
		<div id="video_<%= code %>" onClick="loadVideo(this, '<%= code %>')"></div>
		<script>$('document').ready(function() {loadTitle('<%= code %>');});</script>
	<% }); %>
</div>

<script>
	function expand(img) {
		$('#fullscreen').css('background-image', 'background-image: url("' + img.src + '") no-repeat center');
		$('#fullscreen').css('display', 'block');
		$('#fullscreen').click(function() { $('#fullscreen').css('display', 'none'); });
	}

	function loadVideo(parentDiv, code) {
		parentDiv.innerHTML = '<iframe src="http://www.youtube.com/embed/' + code + '?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>';
	}

	function loadTitle(code) {
	    $.getJSON("http://gdata.youtube.com/feeds/api/videos/" + code + "?v=2&alt=jsonc", function(response) {
	    	document.getElementById("video_" + code).innerHTML = '<img src="http://img.youtube.com/vi/' + code + '/0.jpg"/>' + '<h2>' + response.data.title + '</h2>';
	    });
	}
</script>

<% include foot %>